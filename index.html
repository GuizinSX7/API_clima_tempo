<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>API clima e tempo</title>
  </head>
  <body>
    <h1>Consulta do clima tempo</h1>

    <form id="formClima">
      <label for="cityInput">Cidade:</label>
      <input type="text" id="cityInput" name="cityInput" /> 
      <button type="submit">Consultar</button>
    </form>

    <div id="climaResult"></div>

    <script>
      document.getElementById('formClima').addEventListener('submit', function(event){
          event.preventDefault();

          const city = document.getElementById('cityInput').value;

          fetch(`http://localhost:7777/climatempo/${city}`)
          .then(response => response.json())
          .then((data) => {
              const tempoResult = document.getElementById('climaResult');
              if (data.Temperatura){
                  tempoResult.innerHTML = `Temperatura: ${data.Temperatura}ºC <br>
                  Umidade: ${data.Umidade}% <br>
                  Velocidade do vento: ${data.VelocidadeDoVento}m/s <br>
                  Descrição do clima: ${data.Clima}`;
              } else {
                  tempoResult.innerHTML = "Erro ao obter dados metereológicos";
              }
          })
          .catch(error => console.error("Erro ao obter dados"));
      })
    </script>
  </body>
</html>
